---
title: "Quantitative Methods for Food Systems Research"
author: "Chris Donovan"
institute: "Food Systems Data Scientist<br>Food Systems Research Institute"
date: '2025-11-05'
date-format: long
format:
  revealjs:
    theme: styles.scss
    logo: assets/uvm_logo.png
    embed-resources: true
    # code-fold: true
    # incremental: true
    # footer: 'footer text'
    # center: true # centers everything vertically, including headers
    # chalkboard: true
    # revealjs-plugins:
    #   - revealjs-text-resizer
    filters:
      - show-lang.lua # In dir of qmd file
engine: jupyter
execute:
    daemon: false
editor:
  markdown:
    wrap: 72
bibliography: assets/bib.bib
citations-hover: true
citeproc: true
include-in-header:
 - text: |
     <style>
     #title-slide .title {
       font-size: 2em;
     }
     </style>
---

## Outline

1. Quant methods, what they are good for and what they aren't
2. Things I wish someone told me earlier
3. Food Systems Secondary Data Survey

# Quantitative Methods in Food Systems

## Quantitative Methods in Food Systems {.smaller}

<div class="v-centered">

::: {.column width = '55%'}
- Old friends
  - T-test
  - ANOVA
  - Regression
- Broader frameworks
  - Dimension reduction
  - Factor analysis
  - Structural equation model
- System modeling
  - Fuzzy cognitive mapping
  - Network
  - Agent-based
  - System dynamics
:::

::: {.column width = '45%'}
<figure>
  <img src="assets/mui_models.png" alt="Description of image" style="width: 100%; border: 2px solid #000;">
  <figcaption>Models identified from a review of studies on retail food environments [@mui2025SimulatedRetailFood]</figcaption>
</figure>

<figure>
  <img src="assets/monasterolo_acsm.png" alt="Description of image" style="width: 100%; border: 2px solid #000;">
  <figcaption>Share of publications over time in Agricultural complex system modeling [@monasterolo2016SustainableInclusiveFood]</figcaption>
</figure>
:::

</div>

::: {.notes}
- Good for: differences, trends, dimension reduction, exploratory work.
  - System modeling - prediction, intervention, counterfactual
- Bad for: 
  - VERY hard to infer causation.
- John Stuart Mill on causation: 
  - Cause precede effect
  - Reasonable mechanism (correlation)
  - No other plausible explanation
- Hand in hand with qualitative work
:::


## (Mis-)Interpreting Quantitative Results {.smaller}

:::: {.panel-tabset}

### P Values

<div class="v-centered">

::: {.column width = '50%'}
- What does a p-value mean? [@anderson2020MisinterpretingDiscrepancyValues]
  - Should be smaller
:::

::: {.column width = '50%'}
![Intervale Farm, Sally McCay, UVM Photo](assets/intervale_small.png){class="centered" fig-alt="A picture of a field at Intervale Farm."}
:::

</div>

### Confidence Intervals

<div class="v-centered">

::: {.column width = '40%'}
- Misinterpretation of confidence intervals [@cumming2005InferenceEyeConfidence]
:::

::: {.column width = '60%'}


<div class="centered">
::: {.r-stack}

::: {.fragment .fade-out .centered-plot fragment-index=0}

```{python}
#| label: plotly_confidence_intervals
import plotly.graph_objects as go

# Example data
x = ['A', 'B']
y = [2.5, 1.6]
ci = [0.5, 0.5]

# Create figure
fig = go.Figure()

# Add points with error bars
fig.add_trace(go.Scatter(
    x=x,
    y=y,
    mode='markers',
    error_y=dict(
        type='data',
        array=ci,
        visible=True,
        width=12,
        thickness=3.5
    ),
    marker=dict(
        size=12,
        color='#076678'
    )
))

# Customize layout
fig.update_layout(
    xaxis=dict(
        title='Group',
        range=[-2, 4]
    ),
    yaxis=dict(
        title='Value',
        range=[0, 3.5]
    ),
    template='simple_white',
    width=300,
    height=450
    # plot_bgcolor='#F2E5BC',
    # paper_bgcolor='#F2E5BC'
)

fig.show()
```

:::

::: {.fragment .fade-in fragment-index=0}
<img src="assets/cumming_ci_graph.png" style="height: 550px; border: 2px solid #000; display: inline-block;">
:::

:::

</div>

:::

</div>


### Effect Size

<div class="v-centered">

::: {.column width = '40%'}
- Illusion of Predictability in Scientific Results [@zhang2023IllusionPredictabilityScientific]
- <a href="https://sam.zhang.fyi/html/psup/index.html" target="_blank">What is the effect size?</a>
:::

::: {.column width = '60%'}
<img src="assets/effect_size.png" class="centered">
:::

</div>


### Data Visualization

<div class="v-centered">

::: {.column width = "40%"}

- How to Lie With Statistics [@huff1993HowLieStatistics]
- [@lo2022MisinformedVisualizationWhat]

::: 

::: {.column width = "60%"}

<div class="centered">

```{python}
#| label: misleading_viz
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.mplot3d import Axes3D

colors = ['#076678', '#9d0006', '#fabd2f', '#e851e3ff', '#167124ff']

fig, axes = plt.subplots(1, 3, figsize=(12, 3))

# pie chart
sizes = [20, 19, 21, 22, 18]
labels = ['A', 'B', 'C', 'D', 'E']
axes[0].pie(
    sizes,
    labels=labels,
    colors=colors
)
axes[0].set_title('Pie Chart', fontsize=16)

# truncated
categories = ['Product A', 'Product B']
values = [100, 105]
axes[1].bar(categories, values, color=colors[0:2])
axes[1].set_ylim(95, 110)
axes[1].set_ylabel('Sales')
axes[1].set_title('Bar Chart', fontsize=16)

# 3d bar chart
ax3d = fig.add_subplot(133, projection='3d')
x = np.array([0, 1])
y = np.array([0, 0])
z = np.array([0, 0])
dx = np.array([0.5, 0.5])
dy = np.array([0.5, 0.5])
dz = np.array([50, 55])
ax3d.bar3d(x, y, z, dx, dy, dz, color=colors[0:2])
ax3d.set_title('3D Chart', fontsize=16)
ax3d.set_xticks([0.25, 1.25])
ax3d.set_xticklabels(['X', 'Y'])
ax3d.set_zlabel('Value')

plt.show()
```

</div>

:::

</div>

::::

::: {.notes}
Not to mention:
- Confounders - control for them, but not the wrong ones. Berksens paradox
- Simpson's paradox
- Statistics and eugenics
  - Galton: Founder of eugenics movement, coined term
  - Fisher: First chair of eugenics society, University of Cambridge. Galton Professor of Eugenics at Universty College London. Also cigarettes - correlation is not causation
:::

## Things I wish someone told me earlier {.smaller}

::: {.panel-tabset}


### Planning Ahead

- Whiteboard exercise
- Think through:
  - Power, sample size, outliers
- Consider preregistration

::: {.notes}
- Planning ahead
  - Whiteboard - DAGs and Berksen's paradox
  - Who knows what pre-registration is?
:::


### Choosing Tools

- GUI vs scripting
- R, Python, Julia, others
- Open source
- Free (both ways)
- 


### Exploratory Data Analysis

- Do it
- Get to know your data
- Distributional assumptions
- Missing data

::: {.notes}
- EDA
  - Get to know your data
    - Juvenile detention example
    - Words in survey example
    - Missing data example
:::


### Reproducibility 

- Reproducibility
- Basically Git

- Add the comic

### Getting Help

- Maria S. at the library
- DataCamp, other online tools
- Use AI scrupulously 
- Each other!

:::

## Closing thoughts on Quant things

- Participatory modeling
  - FCM, Community system dynamics
- Even if you're not going to do quant analysis, you have to know enough to critically consume


# Data Survey Title Slide? {.centered-section}

## Intro

## Methods

## Results

## Discussion

## References
